name: PlatformIO CI

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository and submodules
      uses: actions/checkout@v3
    - name: Install g++ compiler
      run: |
        sudo apt install build-essential
    - name: Build Tests
      working-directory: robast_can_msgs/tests
      run: |
        g++ -std=c++17 -c tests_main.cpp
        g++ -std=c++17 tests_main.o tests_robast_can_msgs.cpp ../can_helper.cpp -o test_executable -I ../    
    - name: Execute Tests
      working-directory: robast_can_msgs/tests
      run: |
        ./test_executable