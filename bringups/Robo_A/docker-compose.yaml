version: '3.9'

services:
  navigation:
    image: ghcr.io/robast-gmbh/monorepo/navigation:release
    environment:
      - ROS_DOMAIN_ID=0
      - UID=1000
      - FASTRTPS_DEFAULT_PROFILES_FILE=/DDS/fast_DDS_config.xml
    volumes:
      - ./configs/:/configs/:cached
      - ./start_scripts/:/start_scripts/:cached
      - /dev/shm:/dev/shm
      - ./DDS/:/DDS/:cached
    command: /bin/sh -c "./start_scripts/nav_start.sh"
    stop_signal: SIGINT
    network_mode: "host"

  # statemachine:
  #   image: ghcr.io/robast-gmbh/monorepo/statemachine:release
  #   environment:
  #     - ROS_DOMAIN_ID=0
  #     - UID=1000
  #   volumes:
  #     - ./start_scripts/:/start_scripts/:cached
  #     - /tmp/.X11-unix:/tmp/.X11-unix
  #     - /dev/shm:/dev/shm
  #   command: /bin/sh -c "./start_scripts/statemachine_start.sh"
  #   stop_signal: SIGINT
  #   network_mode: "host"

  hardware_nodes:
    image: ghcr.io/robast-gmbh/monorepo/hardware_nodes:release
    environment:
      - ROS_DOMAIN_ID=0
      - UID=1000
    volumes:
      - ./start_scripts/:/start_scripts/:cached
      # - /dev/shm:/dev/shm
    command: /bin/sh -c "./start_scripts/hardware_nodes_start.sh"
    stop_signal: SIGINT
    network_mode: "host"