<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4" main_tree_to_execute="BehaviorTree">
  <BehaviorTree ID="BehaviorTree">
    <ResetDecorator topic="/reset_simple_tree">
      <BaseErrorDecorator topic="/robast_error">
        <Sequence>
          <OpenDrawer drawer_address="{drawer}" drawer_open_topic="/open_drawer"/>
          <ChangeLED blue="105" brightness="150" drawer_address="{drawer}" green="205" led_topic="drawer_leds" mode="1" red="0" use_blackboard_address="false"/>
          <DrawerStatusCondition target_value="true" topic="/drawer_is_open"/>
          <ChangeLED blue="128" brightness="184" drawer_address="{drawer}" green="128" led_topic="drawer_leds" mode="1" red="128" use_blackboard_address="false"/>
          <DrawerStatusCondition target_value="false" topic="/drawer_is_open"/>
          <ChangeLED blue="155" brightness="184" drawer_address="{drawer}" green="155" led_topic="drawer_leds" mode="1" red="0" use_blackboard_address="false"/>
          <ChangeLED blue="155" brightness="25" drawer_address="{drawer}" green="155" led_topic="drawer_leds" mode="1" red="0" use_blackboard_address="false"/>
        </Sequence>
      </BaseErrorDecorator>
    </ResetDecorator>
  </BehaviorTree>

  <!-- Description of Node Models (used by Groot) -->
  <TreeNodesModel>
    <Decorator ID="BaseErrorDecorator" editable="false">
      <input_port name="topic" default="/robast_error"/>
    </Decorator>
    <Decorator ID="ResetDecorator" editable="false">
      <input_port name="topic" default="/tree_reset"/>
    </Decorator>
    <Action ID="ChangeLED" editable="false">
      <input_port name="blue" default="0">uint8</input_port>
      <input_port name="brightness" default="0">uint8 to determine the brightness</input_port>
      <input_port name="drawer_address" default="{drawer}"/>
      <input_port name="green" default="0">uint8</input_port>
      <input_port name="led_topic" default="/drawer_leds"/>
      <input_port name="mode" default="0">uint8. describes the kind of animation thats used</input_port>
      <input_port name="red" default="0">uint8</input_port>
      <input_port name="use_blackboard_address" default="false">bool. wether to use the address that's passed around by I/O or blackboard</input_port>
    </Action>
    <Condition ID="DrawerStatusCondition" editable="false">
      <input_port name="target_value" default="false"/>
      <input_port name="topic" default="/drawer_is_open"/>
    </Condition>
    <Action ID="OpenDrawer" editable="false">
      <input_port name="drawer_address" default="{drawer}"/>
      <input_port name="drawer_open_topic" default="/open_drawer"/>
    </Action>
  </TreeNodesModel>

</root>
