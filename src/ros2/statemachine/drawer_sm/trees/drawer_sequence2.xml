<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4">
  <BehaviorTree ID="BehaviorTree">
    <Sequence>
      <!-- <DrawerOpenReq drawer_address_topic="/open_request"
                     drawer_address="{drawer}"/> -->
      <OpenDrawer drawer_address="{drawer}"
                  drawer_open_topic="/open_drawer"/>
      <ChangeLED blue="0"
                 brightness="128"
                 drawer_address="{drawer}"
                 green="255"
                 led_topic="drawer_leds"
                 mode="1"
                 red="0"/>
      <DrawerStatusCondition target_value="true"
                             topic="/drawer_is_open"/>
      <ChangeLED blue="255"
                 brightness="128"
                 drawer_address="{drawer}"
                 green="255"
                 led_topic="drawer_leds"
                 mode="1"
                 red="255"/>
      <DrawerStatusCondition target_value="false"
                             topic="/drawer_is_open"/>
      <ChangeLED blue="0"
                 brightness="0"
                 drawer_address="{drawer}"
                 green="0"
                 led_topic="drawer_leds"
                 mode="3"
                 red="0"/>
      <ChangeLED blue="255"
                 brightness="128"
                 drawer_address="{drawer}"
                 green="0"
                 led_topic="drawer_leds"
                 mode="1"
                 red="0"/>
    </Sequence>
  </BehaviorTree>

  <!-- Description of Node Models (used by Groot) -->
  <TreeNodesModel>
    <Action ID="ChangeLED"
            editable="false">
      <input_port name="blue"
                  default="0">uint8</input_port>
      <input_port name="brightness"
                  default="0">uint8 to determine the brightness</input_port>
      <input_port name="drawer_address"
                  default="{drawer}"/>
      <input_port name="green"
                  default="0">uint8</input_port>
      <input_port name="led_topic"
                  default="drawer_leds"/>
      <input_port name="mode"
                  default="0">uint8. describes the kind of animation thats used</input_port>
      <input_port name="red"
                  default="0">uint8</input_port>
    </Action>
    <Action ID="DrawerOpenReq"
            editable="false">
      <input_port name="drawer_address_topic"
                  default="topic"/>
      <output_port name="drawer_address"
                   default="{drawer}"/>
    </Action>
    <Condition ID="DrawerStatusCondition"
               editable="false">
      <input_port name="target_value"
                  default="false"/>
      <input_port name="topic"
                  default="/drawer_is_open"/>
    </Condition>
    <Action ID="OpenDrawer"
            editable="false">
      <input_port name="drawer_address"
                  default="{drawer}"/>
      <input_port name="drawer_open_topic"
                  default="/open_drawer"/>
    </Action>
  </TreeNodesModel>

</root>
